<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Meta -->
    <meta name="description" content="Responsive Bootstrap4 Dashboard Template">
    <meta name="author" content="ParkerThemes">
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/AiPacino/kuaidashboard@main/img/fav.png"/>

    <!-- Title -->
    <title>Le Rouge Admin Template - Signup</title>


    <!-- *************
        ************ Common Css Files *************
    ************ -->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/AiPacino/kuaidashboard@main/css/bootstrap.min.css"/>

    <!-- Main CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/AiPacino/kuaidashboard@main/css/main.css"/>

</head>

<body class="authentication">

<!-- Container start -->
<div class="container" id="main">

    <div class="row justify-content-md-center">
        <div class="col-xl-5 col-lg-6 col-md-6 col-sm-12">
            <div class="login-screen">
                <div class="login-box">
                    <a class="login-logo">
                        <img src="https://cdn.jsdelivr.net/gh/AiPacino/kuaidashboard@main/img/logo-dark.png" alt="销售统计"/>
                    </a>
                    <h5>Welcome,<br/>Create your Admin Account.</h5>
                    <div class="form-group">
                        <input type="text" v-model="username" class="form-control" placeholder="UserName"/>
                    </div>
                    <div class="form-group">
                        <div class="input-group">
                            <input type="text" v-model="email" class="form-control" placeholder="Email Address"/>
                            <input type="password" v-model="password" class="form-control" placeholder="Password">
                        </div>
                        <small class="text-muted">
                            Password must be 8-20 characters long.
                        </small>
                    </div>
                    <div class="actions mb-4">
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" class="custom-control-input" id="remember_pwd">
                            <label class="custom-control-label" for="remember_pwd">保持登陆</label>
                        </div>
                        <button type="button" @click="SignUp" class="btn btn-primary">Signup</button>
                    </div>
                    <hr>
                    <div class="m-0">
                            <span class="additional-link">Have an account? <a href="login"
                                                                              class="btn btn-dark">Login</a></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<!-- Container end -->
<script src="https://cdn.jsdelivr.net/gh/AiPacino/kuaidashboard@main/assets/js/common.js"></script>
<script src="https://cdn.jsdelivr.net/gh/AiPacino/kuaidashboard@main/assets/js/base/vue.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/AiPacino/kuaidashboard@main/assets/js/base/axios.min.js"></script>
<script>
    new Vue({
        el: '#main',
        delimiters: ['${', '}'],
        data: {
            'email': '',
            'password': '',
            'username': ''
        },
        computed: {},
        watch: {},
        created() {
        },
        methods: {
            Login() {
                console.log("-----");
                console.log(API_LOGIN)
                axios.post(API_LOGIN, JSON.stringify({
                    'email': this.email,
                    'password': this.password,
                })).then((response) => {
                    if (response.data.response.token) {
                        console.log("保存token")
                        localStorage.setItem('token', "Bearer " + res.response.token);
                        window.location.href = '/dashboard';
                    }
                }).catch(function (error) {
                });
            },
            SignUp() {
                console.log("-----");
                axios.post(API_SIGN_UP, JSON.stringify({
                    'email': this.email,
                    'password': this.password,
                    'username': this.username,
                })).then((response) => {
                    if (response.data.response.id) {
                        window.location.href = '/login';
                    }
                }).catch(function (error) {
                });
            },
        },
        filters: {}
    })
</script>
</body>
</html>
